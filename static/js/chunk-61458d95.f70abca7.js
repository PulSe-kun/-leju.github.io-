(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61458d95"],{"02cf":function(t,e,a){},"0a71":function(t,e,a){},1315:function(t,e,a){"use strict";a("4454")},4454:function(t,e,a){},4624:function(t,e,a){"use strict";var i=a("7859"),r=a("b63a"),o={data:function(){return{datalist:[],start:1,limit:10,total:0,headers:{token:Object(i["b"])()}}},methods:{handleSizeChange:function(t){this.limit=t,this.init()},handleCurrentChange:function(t){this.start=t,this.init()},$imgAdd:function(t,e){var a=this,i=new FormData;i.append("file",e),Object(r["g"])(i).then((function(e){a.$refs.md.$img2Url(t,e.data.fileUrl)}))}}};e["a"]=o},"47ba":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("b775");function r(){return Object(i["a"])({url:"/lejuAdmin/category/getAllCategory"})}},5278:function(t,e,a){"use strict";a("02cf")},"6e5b":function(t,e,a){"use strict";a("0a71")},"7adc":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return n})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return l})),a.d(e,"g",(function(){return u})),a.d(e,"h",(function(){return d})),a.d(e,"c",(function(){return c})),a.d(e,"i",(function(){return p}));a("99af");var i=a("b775");function r(t,e,a){return Object(i["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:a})}function o(t){return Object(i["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/lejuAdmin/product/del/".concat(t),method:"delete"})}function c(t){return Object(i["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(t)})}function s(t){return Object(i["a"])({url:"/lejuAdmin/product/switchNewStatus",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/lejuAdmin/product/switchPublishStatus",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/lejuAdmin/product/switchRecommandStatus",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/lejuAdmin/product/switchVerifyStatus",method:"post",data:t})}function p(t){return Object(i["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"post",data:t})}},"7db0":function(t,e,a){"use strict";var i=a("23e7"),r=a("b727").find,o=a("44d2"),n=a("ae40"),c="find",s=!0,l=n(c);c in[]&&Array(1)[c]((function(){s=!1})),i({target:"Array",proto:!0,forced:s||!l},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(c)},"7fd5":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addProduct"},[a("div",{staticClass:"steps"},[a("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"商品基本信息"}}),a("el-step",{attrs:{title:"添加库存信息"}}),a("el-step",{attrs:{title:"添加移动端详情"}})],1)],1),a("div",{staticClass:"content"},[1==t.active?a("div",{staticClass:"basic"},[a("el-card",{staticClass:"margin_30"},[a("el-form",{ref:"productData",staticClass:"demo-productData",attrs:{model:t.productData,rules:t.rules,"label-width":"80px",size:"mini"}},[a("div",{staticClass:"header"},[t._v(" 基本信息 ")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品名称",prop:"product.name"}},[a("el-input",{model:{value:t.productData.product.name,callback:function(e){t.$set(t.productData.product,"name",e)},expression:"productData.product.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品编码"}},[a("el-input",{model:{value:t.productData.product.productSn,callback:function(e){t.$set(t.productData.product,"productSn",e)},expression:"productData.product.productSn"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品分类"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"商品分类"},on:{change:t.getCategoryName},model:{value:t.productData.product.productCategoryId,callback:function(e){t.$set(t.productData.product,"productCategoryId",e)},expression:"productData.product.productCategoryId"}},t._l(t.categoryList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"品牌"},on:{change:t.getBrandName},model:{value:t.productData.product.brandId,callback:function(e){t.$set(t.productData.product,"brandId",e)},expression:"productData.product.brandId"}},t._l(t.brandList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:17}},[a("el-form-item",{attrs:{label:"商品描述"}},[a("el-input",{attrs:{type:"textarea",maxlength:"50","show-word-limit":"",rows:3},model:{value:t.productData.product.description,callback:function(e){t.$set(t.productData.product,"description",e)},expression:"productData.product.description"}})],1)],1)],1),a("div",{staticClass:"header"},[t._v(" 商品属性 ")]),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品原价"}},[a("el-input-number",{on:{change:t.handleChange},model:{value:t.productData.product.originalPrice,callback:function(e){t.$set(t.productData.product,"originalPrice",e)},expression:"productData.product.originalPrice"}}),t._v(" 元 ")],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"促销类型"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"没有使用促销价格",disabled:!0},model:{value:t.productData.product.promotionType,callback:function(e){t.$set(t.productData.product,"promotionType",e)},expression:"productData.product.promotionType"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"活动价格"}},[a("el-input-number",{attrs:{disabled:!0},model:{value:t.productData.product.promotionPrice,callback:function(e){t.$set(t.productData.product,"promotionPrice",e)},expression:"productData.product.promotionPrice"}}),t._v(" 元 ")],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品现价"}},[a("el-input-number",{model:{value:t.productData.product.price,callback:function(e){t.$set(t.productData.product,"price",e)},expression:"productData.product.price"}}),t._v(" 元 ")],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"重量"}},[a("el-input-number",{on:{change:t.handleChange},model:{value:t.productData.product.weight,callback:function(e){t.$set(t.productData.product,"weight",e)},expression:"productData.product.weight"}}),t._v(" 千克 ")],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核状态"}},[a("el-switch",{on:{change:t.switchVerifyStatus},model:{value:t.productData.product.verifyStatus,callback:function(e){t.$set(t.productData.product,"verifyStatus",e)},expression:"productData.product.verifyStatus"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否上架"}},[a("el-switch",{model:{value:t.productData.product.publishStatus,callback:function(e){t.$set(t.productData.product,"publishStatus",e)},expression:"productData.product.publishStatus"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"缩略图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss","show-file-list":!1,multiple:!1,headers:t.headers,"list-type":"picture-card","on-success":t.handleAvatar}},[t.productData.product.pic?a("img",{staticClass:"el-upload-list__item-thumbnail",staticStyle:{width:"100%",height:"100%"},attrs:{src:t.productData.product.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),a("div",{staticClass:"header"},[t._v(" 其他信息 ")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"推荐状态"}},[a("el-switch",{model:{value:t.productData.product.recommendStatus,callback:function(e){t.$set(t.productData.product,"recommendStatus",e)},expression:"productData.product.recommendStatus"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"新品状态"}},[a("el-switch",{model:{value:t.productData.product.newStatus,callback:function(e){t.$set(t.productData.product,"newStatus",e)},expression:"productData.product.newStatus"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预告商品"}},[a("el-switch",{model:{value:t.productData.product.previewStatus,callback:function(e){t.$set(t.productData.product,"previewStatus",e)},expression:"productData.product.previewStatus"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"搜索关键词"}},[a("el-input",{attrs:{placeholder:"关键词"},model:{value:t.productData.product.keywords,callback:function(e){t.$set(t.productData.product,"keywords",e)},expression:"productData.product.keywords"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"库存预警"}},[a("el-input-number",{on:{change:t.handleChange},model:{value:t.productData.product.lowStock,callback:function(e){t.$set(t.productData.product,"lowStock",e)},expression:"productData.product.lowStock "}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品排序"}},[a("el-input-number",{on:{change:t.handleChange},model:{value:t.productData.product.sort,callback:function(e){t.$set(t.productData.product,"sort",e)},expression:"productData.product.sort"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"产品服务"}},[a("el-checkbox-group",{on:{change:t.doMore},model:{value:t.serviceIds,callback:function(e){t.serviceIds=e},expression:"serviceIds"}},[a("el-checkbox",{attrs:{label:"1"}},[t._v("无忧退货")]),a("el-checkbox",{attrs:{label:"2"}},[t._v("快速退款")]),a("el-checkbox",{attrs:{label:"3"}},[t._v("免费包邮")])],1)],1)],1),a("el-col",{attrs:{span:24,offset:10}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.next}},[t._v("下一步,填写库存信息")])],1)],1)],1)],1)],1):2==t.active?a("div",{staticClass:"sku"},[a("el-card",{staticClass:"margin_30"},[a("el-form",{ref:"productData",staticClass:"demo-productData",attrs:{model:t.productData,rules:t.rules,"label-width":"80px",size:"mini"}},[a("div",{staticClass:"header"},[t._v(" 商品sku信息 ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"标题"},model:{value:t.productData.product.detailTitle,callback:function(e){t.$set(t.productData.product,"detailTitle",e)},expression:"productData.product.detailTitle"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"副标题"}},[a("el-input",{attrs:{placeholder:"副标题"},model:{value:t.productData.product.detailDesc,callback:function(e){t.$set(t.productData.product,"detailDesc",e)},expression:"productData.product.detailDesc"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"画册图片"}},[a("el-upload",{attrs:{action:t.uploadUrl,headers:t.headers,"on-remove":t.handleRemove,"file-list":t.fileList,"on-success":t.imgUploadSuccess,limit:5,"on-preview":t.handlePictureCardPreview,"list-type":"picture-card","before-upload":t.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus"}),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.dialogImageUrl,alt:""}})]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb,文件不超过5个 ")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"sku设置"}},[a("div",{staticClass:"info"},[t.colorList.length>0?a("div",{staticClass:"line"},[a("span",{staticStyle:{"margin-right":"10px",color:"orange"}},[t._v("颜色:")]),a("el-checkbox-group",{model:{value:t.selectedColor,callback:function(e){t.selectedColor=e},expression:"selectedColor"}},t._l(t.colorList,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.value}},[t._v(" "+t._s(e.value)+" "),a("el-link",{attrs:{type:"danger"},on:{click:function(a){return t.delColor(e)}}},[t._v("删除")])],1)})),1)],1):t._e(),t.sizeList.length>0?a("div",{staticClass:"line"},[a("span",{staticStyle:{"margin-right":"10px",color:"orange"}},[t._v("大小:")]),a("el-checkbox-group",{model:{value:t.selectedSize,callback:function(e){t.selectedSize=e},expression:"selectedSize"}},t._l(t.sizeList,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.value}},[t._v(" "+t._s(e.value)+" "),a("el-link",{attrs:{type:"danger"},on:{click:function(a){return t.delSize(e)}}},[t._v("删除")])],1)})),1)],1):t._e()]),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"颜色选项",size:"mini"},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"mini"},on:{click:t.addColor}},[t._v("创建颜色选项")])],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"大小选项",size:"mini"},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"mini"},on:{click:t.addSize}},[t._v("创建大小选项")])],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.buildList}},[t._v("生成sku列表")])],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addSku}},[t._v("新增sku")])],1)],1),a("div",{staticStyle:{"padding-top":"10px"}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.productData.pmsSkuStockList.length>0,expression:"productData.pmsSkuStockList.length>0"}],attrs:{size:"mini",data:t.productData.pmsSkuStockList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",fixed:"left",align:"center"}}),a("el-table-column",{attrs:{label:"图片",width:140,align:"center",prop:"pic"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.headers,"show-file-list":!1,"on-success":function(a){return t.handleSkuPic(a,e.row.ids)}},nativeOn:{click:function(a){return t.getSkuPic(e.row)}}},[e.row.pic?a("img",{staticClass:"avatar",staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]}}])}),a("el-table-column",{attrs:{label:"颜色",width:180,align:"center",prop:"spData[0].value"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.spData[0].value,callback:function(a){t.$set(e.row.spData[0],"value",a)},expression:"scope.row.spData[0].value"}})]}}])}),a("el-table-column",{attrs:{label:"大小",width:180,align:"center",prop:"spData[1].value"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.spData?a("el-input",{attrs:{size:"mini"},model:{value:e.row.spData[1].value,callback:function(a){t.$set(e.row.spData[1],"value",a)},expression:"scope.row.spData[1].value"}}):t._e()]}}])}),a("el-table-column",{attrs:{label:"库存",width:120,align:"center",prop:"stock"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"自定义库存"},model:{value:e.row.stock,callback:function(a){t.$set(e.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),a("el-table-column",{attrs:{label:"预警库存",width:120,align:"center",prop:"lowStock"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"预警库存"},model:{value:e.row.lowStock,callback:function(a){t.$set(e.row,"lowStock",a)},expression:"scope.row.lowStock"}})]}}])}),a("el-table-column",{attrs:{label:"锁定库存",width:120,align:"center",prop:"lockStock"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"锁定库存"},model:{value:e.row.lockStock,callback:function(a){t.$set(e.row,"lockStock",a)},expression:"scope.row.lockStock"}})]}}])}),a("el-table-column",{attrs:{label:"sku编码",width:200,align:"center",prop:"skuCode"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"自定义sku编码"},model:{value:e.row.skuCode,callback:function(a){t.$set(e.row,"skuCode",a)},expression:"scope.row.skuCode"}})]}}])}),a("el-table-column",{attrs:{label:"价格",width:120,align:"center",prop:"price"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"价格,单位:分"},model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}})]}}])}),a("el-table-column",{attrs:{label:"销量",width:120,align:"center",prop:"sale"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.sale,callback:function(a){t.$set(e.row,"sale",a)},expression:"scope.row.sale"}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:140,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{color:"red"},attrs:{size:"mini",type:"text"},on:{click:function(a){return t.removeSku(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),a("el-col",{attrs:{span:24,offset:10}},[a("el-button",{attrs:{size:"small"},on:{click:t.pre}},[t._v("返回上一步")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.next}},[t._v("下一步,填写移动端详情")])],1)],1)],1)],1)],1):a("div",{staticClass:"info"},[a("el-card",{staticClass:"margin_30",staticStyle:{width:"100%"}},[a("div",{staticClass:"header"},[t._v(" 详情描述 ")]),a("div",{staticClass:"main"},[a("el-form",{ref:"productData",attrs:{model:t.productData,rules:t.rules,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"商品详情"}},[a("tinymce",{model:{value:t.productData.product.detailMobileHtml,callback:function(e){t.$set(t.productData.product,"detailMobileHtml",e)},expression:"productData.product.detailMobileHtml"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"备注"},model:{value:t.productData.product.note,callback:function(e){t.$set(t.productData.product,"note",e)},expression:"productData.product.note"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8,offset:10}},[a("el-button",{attrs:{size:"small"},on:{click:t.pre}},[t._v("返回上一步")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submit}},[t._v("提交保存")])],1)],1)],1)],1)])])},r=[],o=(a("d3b7"),a("159b"),a("ac1f"),a("1276"),a("7db0"),a("b0c0"),a("d81d"),a("a15b"),a("e9c4"),a("4de4"),a("a434"),a("8256")),n=a("7adc"),c=a("8874"),s=a("47ba"),l=a("4624"),u=a("ec26"),d={components:{tinymce:o["a"]},mixins:[l["a"]],data:function(){return{brandList:[],categoryList:[],active:1,dialogImageUrl:"",dialogVisible:!1,serviceIds:[],uploadUrl:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",fileList:[],color:"",selectedColor:[],colorList:[],size:"",selectedSize:[],sizeList:[],selectedId:{},flag:!1,productData:{pmsSkuStockList:[],product:{albumPics:"",brandId:"",brandName:"",description:"",detailDesc:"",detailHtml:"",detailMobileHtml:"",detailTitle:"",feightTemplateId:"",giftGrowth:0,giftPoint:0,id:"",keywords:"",lowStock:10,name:"",newStatus:!1,note:"",originalPrice:0,pic:"",previewStatus:!1,price:0,productAttributeCategoryId:"",productCategoryId:"",productCategoryName:"",productSn:"",promotionPerLimit:0,promotionPrice:0,deleteStatus:0,promotionEndTime:"",promotionStartTime:"",promotionType:0,modifyTime:"",publishStatus:!0,recommendStatus:!1,sale:0,serviceIds:"",sort:666,stock:0,subTitle:"",unit:"",usePointLimit:0,verifyStatus:!0,weight:0,createTime:""}},pageValidFiles:["product.name"],rules:{product:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}]}}}},created:function(){this.init()},methods:{init:function(){var t=this;this.$route.query.id&&(this.flag=!0,this.id=this.$route.query.id,Object(n["c"])(this.$route.query.id).then((function(e){if(t.productData=e.data,t.productData.pmsSkuStockList=e.data.skus,t.productData.pmsSkuStockList.forEach((function(t){return t.spData=JSON.parse(t.spData)})),t.productData.product.newStatus=!!e.data.product.newStatus,t.productData.product.previewStatus=!!e.data.product.previewStatus,t.productData.product.publishStatus=!!e.data.product.publishStatus,t.productData.product.recommendStatus=!!e.data.product.recommendStatus,t.productData.product.verifyStatus=!!e.data.product.verifyStatus,t.productData.product.serviceIds&&t.productData.product.serviceIds.length>0&&(t.serviceIds=t.productData.product.serviceIds.split(",")),t.productData.product.albumPics){var a=t.productData.product.albumPics.split(",");a.forEach((function(e){t.fileList.push({url:e})}))}}))),Object(c["c"])().then((function(e){t.brandList=e.data.items})),Object(s["a"])().then((function(e){t.categoryList=e.data.items.find((function(t){return"乐居"===t.category.name})).children}))},submit:function(){var t=this,e=this.fileList.map((function(t){return t.url}));this.productData.product.serviceIds=this.serviceIds.join(","),this.productData.product.albumPics=e.join(","),this.productData.product.newStatus=this.productData.product.newStatus?1:0,this.productData.product.previewStatus=this.productData.product.previewStatus?1:0,this.productData.product.publishStatus=this.productData.product.publishStatus?1:0,this.productData.product.recommendStatus=this.productData.product.recommendStatus?1:0,this.productData.product.verifyStatus=this.productData.product.verifyStatus?1:0,this.productData.pmsSkuStockList.forEach((function(t){return t.spData=JSON.stringify(t.spData)})),this.id?(Object(n["i"])(this.productData).then((function(e){e.success&&t.$message({type:"success",message:"编辑成功!"})})),this.$router.go(-1)):(Object(n["a"])(this.productData).then((function(e){e.success&&t.$message({type:"success",message:"新增成功!"})})),this.$router.go(-1))},getCategoryName:function(t){this.productData.product.productCategoryName=this.categoryList.find((function(e){return e.id===t})).name},getBrandName:function(t){this.productData.product.brandName=this.brandList.find((function(e){return e.id===t})).name},switchVerifyStatus:function(t){},handleRemove:function(t,e){this.fileList=this.fileList.filter((function(e){return e.url!==t.url}))},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleAvatar:function(t){this.productData.product.pic=t.data.fileUrl},imgUploadSuccess:function(t,e){t.success?(this.fileList.push({url:t.data.fileUrl}),this.$message.success("上传成功")):this.$message.error("上传失败")},handleSkuPic:function(t,e){var a=this;this.productData.pmsSkuStockList.forEach((function(e){e===a.selectedId&&(e.pic=t.data.fileUrl)}))},removeSku:function(t){t.ids?this.productData.pmsSkuStockList=this.productData.pmsSkuStockList.filter((function(e){return e.ids!=t.ids})):this.productData.pmsSkuStockList=this.productData.pmsSkuStockList.filter((function(e){return e.id!=t.id}))},getSkuPic:function(t){this.selectedId=t},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/jpeg",a=t.size/1024/1024<1;return e||this.$message.error("上传头像,只能jpg/png格式哦!"),a||this.$message.error("上传头像图片大小不能超过 1MB!"),e&&a},next:function(){var t=!0,e=[];1==this.active&&(e=this.pageValidFiles),this.$refs.productData.validateField(e,(function(e){t=e?t&&!1:t&&!0})),t?this.active++:this.$message.error("请注意表单验证！！！")},pre:function(){this.active<=1||this.active--},addColor:function(){this.colorList.push({id:Object(u["a"])(),value:this.color}),this.color=""},addSize:function(){this.sizeList.push({id:Object(u["a"])(),value:this.size}),this.size=""},delColor:function(t){-1!==this.colorList.indexOf(t)&&this.colorList.splice(this.colorList.indexOf(t),1)},delSize:function(t){-1!==this.sizeList.indexOf(t)&&this.sizeList.splice(this.sizeList.indexOf(t),1)},buildList:function(){var t=this;if(this.flag=!0,this.selectedColor.length<=0||this.selectedSize.length<=0)this.$message.error("请选中颜色和大小");else{var e=[];this.selectedColor.forEach((function(a){t.selectedSize.forEach((function(t){var i={ids:Object(u["a"])(),id:"",lockStock:10,lowStock:20,pic:"",price:0,productId:"",promotionPrice:0,sale:0,skuCode:"",spData:[{key:"颜色",value:a},{key:"大小",value:t}],stock:100,modifyTime:"",createTime:""};e.push(i)}))})),this.productData.pmsSkuStockList=e}},addSku:function(){var t={ids:Object(u["a"])(),id:"",lockStock:10,lowStock:20,pic:"",price:0,productId:"",promotionPrice:0,sale:0,skuCode:"",spData:[{key:"颜色",value:""},{key:"大小",value:""}],stock:100,modifyTime:"",createTime:""};this.productData.pmsSkuStockList.push(t)},doMore:function(t){},handleChange:function(){}}},p=d,m=(a("6e5b"),a("2877")),f=Object(m["a"])(p,i,r,!1,null,"d302c4ba",null);e["default"]=f.exports},8256:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[a("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),a("div",{staticClass:"editor-custom-btn-container"},[a("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},r=[],o=(a("b680"),a("a9e3"),a("ac1f"),a("00b4"),a("d3b7"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-container"},[a("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" upload ")]),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" Click upload ")])],1),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Cancel ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" Confirm ")])],1)],1)}),n=[],c=(a("b64b"),a("d81d"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var a=e.uid,i=Object.keys(this.listObj),r=0,o=i.length;r<o;r++)if(this.listObj[i[r]].uid===a)return this.listObj[i[r]].url=t.files.file,void(this.listObj[i[r]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,a=Object.keys(this.listObj),i=0,r=a.length;i<r;i++)if(this.listObj[a[i]].uid===e)return void delete this.listObj[a[i]]},beforeUpload:function(t){var e=this,a=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise((function(r,o){var n=new Image;n.src=a.createObjectURL(t),n.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},r(!0)}))}}}),s=c,l=(a("5278"),a("2877")),u=Object(l["a"])(s,o,n,!1,null,"3dae379b",null),d=u.exports,p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=p,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],h=f,b=a("b85c"),v=[];function g(){return window.tinymce}var k=function(t,e){var a=document.getElementById(t),i=e||function(){};if(!a){var r=document.createElement("script");r.src=t,r.id=t,document.body.appendChild(r),v.push(i);var o="onload"in r?n:c;o(r)}function n(e){e.onload=function(){this.onerror=this.onload=null;var t,a=Object(b["a"])(v);try{for(a.s();!(t=a.n()).done;){var i=t.value;i(null,e)}}catch(r){a.e(r)}finally{a.f()}v=null},e.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+t),e)}}function c(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,a=Object(b["a"])(v);try{for(a.s();!(e=a.n()).done;){var i=e.value;i(null,t)}}catch(r){a.e(r)}finally{a.f()}v=null}}}a&&i&&(g()?i(null,a):v.push(i))},y=k,w=a("b63a"),S="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",D={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;y(S,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:h,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(a){e.value&&a.setContent(e.value),e.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",a.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1,images_upload_handler:function(t,e,a,i){i(0);var r=new FormData;r.append("file",t.blob()),Object(w["g"])(r).then((function(t){e(t.data.fileUrl),i(100)}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){return window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},C=D,j=(a("1315"),Object(l["a"])(C,i,r,!1,null,"03371814",null));e["a"]=j.exports},8874:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return l}));a("99af");var i=a("b775");function r(t){return Object(i["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"delete"})}function n(){return Object(i["a"])({url:"/lejuAdmin/brand/findAllBrand"})}function c(t,e){return Object(i["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e)})}function s(t){return Object(i["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}},a15b:function(t,e,a){"use strict";var i=a("23e7"),r=a("44ad"),o=a("fc6a"),n=a("a640"),c=[].join,s=r!=Object,l=n("join",",");i({target:"Array",proto:!0,forced:s||!l},{join:function(t){return c.call(o(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var i=a("23e7"),r=a("23cb"),o=a("a691"),n=a("50c4"),c=a("7b0b"),s=a("65f0"),l=a("8418"),u=a("1dde"),d=a("ae40"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var a,i,u,d,p,m,g=c(this),k=n(g.length),y=r(t,k),w=arguments.length;if(0===w?a=i=0:1===w?(a=0,i=k-y):(a=w-2,i=h(f(o(e),0),k-y)),k+a-i>b)throw TypeError(v);for(u=s(g,i),d=0;d<i;d++)p=y+d,p in g&&l(u,d,g[p]);if(u.length=i,a<i){for(d=y;d<k-i;d++)p=d+i,m=d+a,p in g?g[m]=g[p]:delete g[m];for(d=k;d>k-i+a;d--)delete g[d-1]}else if(a>i)for(d=k-i;d>y;d--)p=d+i-1,m=d+a-1,p in g?g[m]=g[p]:delete g[m];for(d=0;d<a;d++)g[d+y]=arguments[d+2];return g.length=k-i+a,u}})},b63a:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"f",(function(){return n})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"e",(function(){return u}));a("99af");var i=a("b775");function r(t,e,a){return Object(i["a"])({url:"/lejuAdmin/productArticle/findArticles/".concat(t,"/").concat(e),method:"post",data:a})}function o(t){return Object(i["a"])({url:"/lejuAdmin/productArticle/changeShowStatus",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/lejuAdmin/productArticle/updateArticle",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/lejuAdmin/productArticle/del/".concat(t),method:"delete"})}function s(t){return Object(i["a"])({url:"/lejuAdmin/productArticle/addArticle",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/lejuAdmin/material/uploadFileOss",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/lejuAdmin/productArticle/productArticle/".concat(t)})}},ec26:function(t,e,a){"use strict";var i,r=new Uint8Array(16);function o(){if(!i&&(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function c(t){return"string"===typeof t&&n.test(t)}for(var s=c,l=[],u=0;u<256;++u)l.push((u+256).toString(16).substr(1));function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]).toLowerCase();if(!s(a))throw TypeError("Stringified UUID is invalid");return a}var p=d;function m(t,e,a){t=t||{};var i=t.random||(t.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){a=a||0;for(var r=0;r<16;++r)e[a+r]=i[r];return e}return p(i)}e["a"]=m}}]);